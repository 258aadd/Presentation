<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>测试系统v1.0</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>测试系统v1.0</h1>
        </header>

        <!-- 主页面 - 选择功能 -->
        <div id="main-page" class="page active">
            <div class="card">
                <h2>请选择功能</h2>
                <div class="button-group">
                    <button class="btn btn-primary" onclick="showPage('browse-page')">
                        <i class="icon">📁</i>
                        浏览文件
                    </button>
                    <button class="btn btn-secondary" onclick="showPage('upload-page')">
                        <i class="icon">📤</i>
                        上传文件
                    </button>
                    <button class="btn btn-info" onclick="showPage('storage-page')">
                        <i class="icon">💾</i>
                        存储管理
                    </button>
                </div>
            </div>
        </div>

        <!-- 浏览页面 -->
        <div id="browse-page" class="page">
            <div class="card">
                <h2>浏览文件</h2>
                <form id="browse-form">
                    <div class="input-group">
                        <label for="browse-user-id">用户ID:</label>
                        <input type="text" id="browse-user-id" required>
                    </div>
                    <div class="input-group">
                        <label for="browse-title">选择标题:</label>
                        <select id="browse-title" required>
                            <option value="">请先输入用户ID</option>
                        </select>
                    </div>
                    <div class="button-group">
                        <button type="button" class="btn btn-info" onclick="loadTitles()">加载标题</button>
                        <button type="submit" class="btn btn-primary">查看内容</button>
                        <button type="button" class="btn btn-secondary" onclick="showPage('main-page')">返回</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- 上传页面 -->
        <div id="upload-page" class="page">
            <div class="card">
                <h2>上传文件</h2>
                <form id="upload-form">
                    <div class="input-group">
                        <label for="upload-user-id">用户ID:</label>
                        <input type="text" id="upload-user-id" required>
                    </div>
                    <div class="input-group">
                        <label for="upload-title">标题:</label>
                        <input type="text" id="upload-title" required>
                    </div>
                    <div class="input-group">
                        <label for="video-file">视频文件:</label>
                        <input type="file" id="video-file" accept="video/*" required>
                        <div class="file-info" id="video-info"></div>
                    </div>
                    <div class="input-group">
                        <label for="markdown-file">Markdown文档:</label>
                        <input type="file" id="markdown-file" accept=".md,.markdown" required>
                        <div class="file-info" id="markdown-info"></div>
                    </div>
                    <div class="button-group">
                        <button type="submit" class="btn btn-primary">上传文件</button>
                        <button type="button" class="btn btn-secondary" onclick="showPage('main-page')">返回</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- 存储管理页面 -->
        <div id="storage-page" class="page">
            <div class="card">
                <div class="content-header">
                    <h2>存储管理</h2>
                    <button class="btn btn-secondary" onclick="showPage('main-page')">返回主页</button>
                </div>
                <div class="storage-info">
                    <div id="storage-stats" class="storage-stats"></div>
                    <div class="button-group">
                        <button class="btn btn-info" onclick="refreshStorageInfo()">刷新信息</button>
                        <button class="btn btn-secondary" onclick="clearAllStorage()">清空所有数据</button>
                    </div>
                </div>
                <div id="storage-content" class="storage-content"></div>
            </div>
        </div>

        <!-- 内容展示页面 -->
        <div id="content-page" class="page">
            <div class="card">
                <div class="content-header">
                    <h2 id="content-title"></h2>
                    <button class="btn btn-secondary" onclick="showPage('browse-page')">返回浏览</button>
                </div>
                <div class="content-body">
                    <div class="video-section">
                        <h3>视频内容</h3>
                        <video id="content-video" controls width="100%">
                            您的浏览器不支持视频播放。
                        </video>
                    </div>
                    <div class="markdown-section">
                        <h3>文档内容</h3>
                        <div id="content-markdown" class="markdown-content"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="loading" class="loading hidden">
        <div class="spinner"></div>
        <p>处理中...</p>
    </div>

    <div id="message" class="message hidden"></div>

    <script src="script.js"></script>
</body>
</html>
